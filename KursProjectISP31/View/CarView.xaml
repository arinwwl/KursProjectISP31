<UserControl x:Class="CarRentalSystem.View.CarView"
             xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
             xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
             xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006" 
             xmlns:d="http://schemas.microsoft.com/expression/blend/2008" 
             xmlns:local="clr-namespace:CarRentalSystem.View"
             xmlns:vm="clr-namespace:CarRentalSystem.ViewModel"
             xmlns:materialDesign="http://materialdesigninxaml.net/winfx/xaml/themes"
             mc:Ignorable="d" 
             d:DesignHeight="600" d:DesignWidth="800">

    <UserControl.DataContext>
        <vm:CarViewModel/>
    </UserControl.DataContext>

    <Grid Margin="10">
        <Grid.RowDefinitions>
            <RowDefinition Height="Auto"/>
            <RowDefinition Height="*"/>
            <RowDefinition Height="Auto"/>
        </Grid.RowDefinitions>

        <!-- Заголовок -->
        <StackPanel Grid.Row="0" Orientation="Horizontal" Margin="0 0 0 20">
            <TextBlock Text="Car Management" 
                       FontSize="20" 
                       FontWeight="Bold"
                       VerticalAlignment="Center"/>

            <Button Content="Refresh" 
                    Command="{Binding RefreshCommand}"
                    Style="{StaticResource MaterialDesignOutlinedButton}"
                    Margin="20 0 0 0"
                    Width="100"/>
        </StackPanel>

        <!-- Основное содержимое -->
        <ScrollViewer Grid.Row="1" VerticalScrollBarVisibility="Auto">
            <Grid>
                <Grid.ColumnDefinitions>
                    <ColumnDefinition Width="Auto"/>
                    <ColumnDefinition Width="*"/>
                </Grid.ColumnDefinitions>

                <Grid.RowDefinitions>
                    <RowDefinition Height="Auto"/>
                    <RowDefinition Height="Auto"/>
                    <RowDefinition Height="Auto"/>
                    <RowDefinition Height="Auto"/>
                    <RowDefinition Height="Auto"/>
                    <RowDefinition Height="Auto"/>
                    <RowDefinition Height="Auto"/>
                    <RowDefinition Height="Auto"/>
                    <RowDefinition Height="Auto"/>
                    <RowDefinition Height="Auto"/>
                    <RowDefinition Height="Auto"/>
                    <RowDefinition Height="Auto"/>
                </Grid.RowDefinitions>

                <!-- Brand -->
                <TextBlock Text="Brand:" Grid.Row="0" Grid.Column="0" Margin="5" VerticalAlignment="Center"/>
                <ComboBox Grid.Row="0" Grid.Column="1" Margin="5"
                          ItemsSource="{Binding BrandList}"
                          SelectedValue="{Binding CurrentCar.BrandID}"
                          SelectedValuePath="BrandID"
                          DisplayMemberPath="BrandName"
                          materialDesign:HintAssist.Hint="Select brand"/>

                <!-- Registration Number -->
                <TextBlock Text="Reg. Number:" Grid.Row="1" Grid.Column="0" Margin="5" VerticalAlignment="Center"/>
                <TextBox Grid.Row="1" Grid.Column="1" Margin="5"
                         Text="{Binding CurrentCar.RegistrationNumber, UpdateSourceTrigger=PropertyChanged}"
                         materialDesign:HintAssist.Hint="Enter registration number"/>

                <!-- VIN -->
                <TextBlock Text="VIN:" Grid.Row="2" Grid.Column="0" Margin="5" VerticalAlignment="Center"/>
                <TextBox Grid.Row="2" Grid.Column="1" Margin="5"
                         Text="{Binding CurrentCar.VIN, UpdateSourceTrigger=PropertyChanged}"
                         materialDesign:HintAssist.Hint="Enter VIN code"/>

                <!-- Engine Number -->
                <TextBlock Text="Engine No:" Grid.Row="3" Grid.Column="0" Margin="5" VerticalAlignment="Center"/>
                <TextBox Grid.Row="3" Grid.Column="1" Margin="5"
                         Text="{Binding CurrentCar.EngineNumber, UpdateSourceTrigger=PropertyChanged}"
                         materialDesign:HintAssist.Hint="Enter engine number"/>

                <!-- Manufacture Year -->
                <TextBlock Text="Year:" Grid.Row="4" Grid.Column="0" Margin="5" VerticalAlignment="Center"/>
                <DatePicker Grid.Row="4" Grid.Column="1" Margin="5"
                            SelectedDate="{Binding ManufactureYear}"
                            materialDesign:HintAssist.Hint="Select manufacture year"/>

                <!-- Mileage -->
                <TextBlock Text="Mileage:" Grid.Row="5" Grid.Column="0" Margin="5" VerticalAlignment="Center"/>
                <TextBox Grid.Row="5" Grid.Column="1" Margin="5"
                         Text="{Binding CurrentCar.Mileage, UpdateSourceTrigger=PropertyChanged}"
                         materialDesign:HintAssist.Hint="Enter current mileage"/>

                <!-- Car Price -->
                <TextBlock Text="Price:" Grid.Row="6" Grid.Column="0" Margin="5" VerticalAlignment="Center"/>
                <TextBox Grid.Row="6" Grid.Column="1" Margin="5"
                         Text="{Binding CurrentCar.CarPrice, UpdateSourceTrigger=PropertyChanged}"
                         materialDesign:HintAssist.Hint="Enter car price"/>

                <!-- Daily Rental Price -->
                <TextBlock Text="Daily Price:" Grid.Row="7" Grid.Column="0" Margin="5" VerticalAlignment="Center"/>
                <TextBox Grid.Row="7" Grid.Column="1" Margin="5"
                         Text="{Binding CurrentCar.DailyRentalPrice, UpdateSourceTrigger=PropertyChanged}"
                         materialDesign:HintAssist.Hint="Enter daily rental price"/>

                <!-- Last Inspection Date -->
                <TextBlock Text="Last Inspection:" Grid.Row="8" Grid.Column="0" Margin="5" VerticalAlignment="Center"/>
                <DatePicker Grid.Row="8" Grid.Column="1" Margin="5"
                            SelectedDate="{Binding CurrentCar.LastInspectionDate}"
                            materialDesign:HintAssist.Hint="Select last inspection date"/>

                <!-- Assigned Employee -->
                <TextBlock Text="Employee:" Grid.Row="9" Grid.Column="0" Margin="5" VerticalAlignment="Center"/>
                <ComboBox Grid.Row="9" Grid.Column="1" Margin="5"
                          ItemsSource="{Binding EmployeeList}"
                          SelectedValue="{Binding CurrentCar.EmployeeID}"
                          SelectedValuePath="EmployeeID"
                          DisplayMemberPath="FullName"
                          materialDesign:HintAssist.Hint="Select responsible employee"/>

                <!-- Special Notes -->
                <TextBlock Text="Notes:" Grid.Row="10" Grid.Column="0" Margin="5" VerticalAlignment="Top"/>
                <TextBox Grid.Row="10" Grid.Column="1" Margin="5" Height="60"
                         Text="{Binding CurrentCar.SpecialNotes, UpdateSourceTrigger=PropertyChanged}"
                         AcceptsReturn="True"
                         TextWrapping="Wrap"
                         VerticalScrollBarVisibility="Auto"
                         materialDesign:HintAssist.Hint="Enter special notes"/>

                <!-- Is Returned -->
                <CheckBox Grid.Row="11" Grid.Column="1" Margin="5"
                          Content="Is currently available"
                          IsChecked="{Binding CurrentCar.IsReturned}"
                          VerticalAlignment="Center"/>
            </Grid>
        </ScrollViewer>

        <!-- Кнопки управления -->
        <StackPanel Grid.Row="2" Orientation="Horizontal" HorizontalAlignment="Right" Margin="0 10 0 0">
            <Button Content="New" 
                    Command="{Binding NewCarCommand}"
                    Style="{StaticResource MaterialDesignOutlinedButton}"
                    Width="100"
                    Margin="0 0 10 0"/>

            <Button Content="Save" 
                    Command="{Binding SaveCarCommand}"
                    Style="{StaticResource MaterialDesignRaisedButton}"
                    Background="{DynamicResource PrimaryHueMidBrush}"
                    Width="100"
                    Margin="0 0 10 0"/>

            <Button Content="Delete" 
                    Command="{Binding DeleteCarCommand}"
                    Style="{StaticResource MaterialDesignRaisedButton}"
                    Background="{DynamicResource SecondaryHueMidBrush}"
                    Width="100"/>
        </StackPanel>
    </Grid>
</UserControl>